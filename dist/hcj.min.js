var apply=function(t){return function(n){return n(t)}};var constant=function(t){return function(n){return t}};var curry=function(t){throw"the venerable curry, we shall define at a later date"};var id=function(t){return t};var add=function(t,n){return t+n};var subtract=function(t,n){return t-n};var mathMax=function(t,n){return Math.max(t,n)};var mathMin=function(t,n){return Math.min(t,n)};var pushStreams=[];var pushValues=[];var pushing=false;var pushFlush=function(){var t=pushStreams;var n=pushValues;pushStreams=[];pushValues=[];pushing=false;for(var r=0;r<t.length;r++){var e=t[r];var i=n[r]}};var pushNow=function(t,n){pushStreams.push(t);pushValues.push(n);if(pushing===false){pushing=true;setTimeout(function(){setTimeout(pushFlush)})}};var stream={create:function(){return{listeners:[],lastValue:undefined,ended:false}},isStream:function(t){return t&&t.hasOwnProperty("listeners")&&t.hasOwnProperty("lastValue")&&t.hasOwnProperty("ended")},once:function(t){var n=stream.create();stream.push(n,t);return n},push:function(t,n){if(t.lastValue!==n){t.lastValue=n;for(var r=0;r<t.listeners.length;r++){t.listeners[r](n)}}},map:function(t,n){var r=stream.create();if(t.lastValue!==undefined){stream.push(r,n(t.lastValue))}t.listeners.push(function(t){stream.push(r,n(t))});return r},reduce:function(t,n,r){var e=stream.once(r);if(t.lastValue!==undefined){stream.push(e,n(t.lastValue,e.lastValue))}t.listeners.push(function(t){stream.push(e,n(t,e.lastValue))});return e},filter:function(t,n){var r=stream.create();t.listeners.push(function(t){n(t,r.push)});return stream},onValue:function(t,n){return stream.map(t,function(t){n(t);return true})},promise:function(t){var n=$.Deferred();stream.map(t,function(t){n.resolve(t)});return n.promise},prop:function(t,n){return stream.map(t,function(t){return t[n]})},delay:function(t,n){var r=stream.create();stream.map(t,function(t){setTimeout(function(){stream.push(r,t)},n)});return r},end:function(t){t.ended=true},pushAll:function(t,n){if(t.lastValue!==undefined){stream.push(n,t.lastValue)}stream.onValue(t,function(t){stream.push(n,t)})},combine:function(t,n){var r=[];var e=stream.create();var i=false;var a=new Error;var u=function(){if(!i){i=true;setTimeout(function(){a;i=false;for(var u=0;u<t.length;u++){if(r[u]===undefined){return}}stream.push(e,n.apply(null,r))})}};t.reduce(function(t,n){if(n.lastValue!==undefined){r[t]=n.lastValue;u()}stream.onValue(n,function(n){r[t]=n;u()});return t+1},0);return e},all:function(t,n){return stream.combine(t,function(){n.apply(null,arguments);return true})},combineObject:function(t){var n=Object.keys(t);var r={};var e=stream.create();var i=false;var a=function(){if(!i){i=true;setTimeout(function(){i=false;for(var t=0;t<n.length;t++){var a=n[t];if(r[a]===undefined){return}}stream.push(e,$.extend({},r))})}};n.map(function(n,e){stream.onValue(t[n],function(t){r[n]=t;a()})});return e},splitObject:function(t){var n=Object.keys(t);var r={};n.map(function(n){r[n]=stream.once(t[n])});return r},fromPromise:function(t,n){var r=stream.never();if(n){stream.push(r,n)}t.then(function(t){stream.push(r,t)});return r},cases:function(t,n){t.push(n);return stream.combine(t,function(){var t=Array.prototype.slice.call(arguments);var n=t.pop();return t[n]})}};var updateDomEls=[];var updateDomProps=[];var updateDomValues=[];var runDomFuncs=function(){for(var t=0;t<updateDomEls.length;t++){updateDomEls[t].css(updateDomProps[t],updateDomValues[t])}updateDomEls=[];updateDomProps=[];updateDomValues=[];updateWindowWidth()};var updateDomFunc=function(t,n,r){if(updateDomEls.length===0){setTimeout(runDomFuncs)}updateDomEls.push(t);updateDomProps.push(n);updateDomValues.push(r)};var el=function(t){return function(n){return function(r){var e=$(document.createElement(t));var i={$el:e,minWidth:stream.create(),minHeight:stream.create(),width:stream.create(),height:stream.create(),top:stream.create(),left:stream.create(),topAccum:stream.create(),leftAccum:stream.create(),scroll:stream.create()};e.css("pointer-events","initial").css("position","absolute").css("visibility","hidden");stream.onValue(i.top,function(t){updateDomFunc(e,"top",px(t))});stream.onValue(i.left,function(t){updateDomFunc(e,"left",px(t))});stream.onValue(i.width,function(t){updateDomFunc(e,"width",px(t))});stream.onValue(i.height,function(t){updateDomFunc(e,"height",px(t))});stream.all([i.width,i.height,i.top,i.left],function(){updateDomFunc(e,"visibility","")});var a=function(t){var n=$(".sandbox");var r=e.clone();r.css("width",px(t||"")).css("height","").appendTo(n);var a=r[0].scrollWidth;r.remove();stream.push(i.minWidth,a);return a};var u=function(){stream.push(i.minHeight,function(t){var n=$(".sandbox");var r=e.clone();r.css("width",px(t)).css("height","").appendTo(n);var i=parseInt(r.css("height"));r.remove();return i})};var o=n(i,a,u)||id;i.destroy=function(){o();e.remove()};e.appendTo(r);return i}}};var a=el("a");var button=el("button");var div=el("div");var form=el("form");var iframe=el("iframe");var img=el("img");var input=el("input");var li=el("li");var option=el("option");var select=el("select");var textarea=el("textarea");var ul=el("ul");var stream=stream||stream;var apply=apply||apply;var constant=constant||constant;var curry=curry||curry;var id=id||id;var add=add||add;var subtract=subtract||subtract;var mathMax=mathMax||mathMax;var mathMin=mathMin||mathMin;var unit=function(t){return function(n){return n+t}};var px=unit("px");var vw=unit("vw");var windowWidth=stream.create();var windowHeight=stream.create();var updateWindowWidth=function(){stream.push(windowWidth,document.documentElement.clientWidth)};var updateWindowHeight=function(){stream.push(windowHeight,window.innerHeight)};$(updateWindowWidth);$(updateWindowHeight);$(window).on("resize",function(){updateWindowWidth();updateWindowHeight()});var windowResize=stream.once(null,true);$(window).on("resize",function(t){stream.push(windowResize,t)});var windowScroll=stream.create(true);$(window).on("scroll",function(){stream.push(windowScroll,window.scrollY)});stream.push(windowScroll,window.scrollY);var windowHash=stream.create(true);$(window).on("hashchange",function(){stream.push(windowHash,location.pathname)});stream.push(windowHash,location.pathname);var build=function(t,n){if($.isArray(n)){return n.map(function(n){return build(t,n)})}else{return n(t)}};var contextsRecurse=function(t,n,r){if($.isArray(n)){r=r||[];n.map(function(n,e){return contextsRecurse(t,n,r[e])})}else{r=r||{};stream.pushAll(r.width||t.width,n.width,true);stream.pushAll(r.height||t.height,n.height);stream.pushAll(r.left||stream.once(0),n.left);stream.pushAll(r.top||stream.once(0),n.top);stream.pushAll(stream.combine([t.leftAccum,t.left],add),n.leftAccum);stream.pushAll(stream.combine([t.topAccum,t.top],add),n.topAccum);stream.pushAll(stream.combine([t.scroll,t.top],subtract),n.scroll)}};var contexts=function(t,n,r){r=r||{};if($.isArray(n)){if(!$.isArray(r)){r=[{minWidth:r.minWidth||n[0].minWidth,minHeight:r.minHeight||n[0].minHeight},r]}var e=r.splice(0,1)[0];stream.pushAll(e.minWidth,t.minWidth);stream.pushAll(e.minHeight,t.minHeight);contextsRecurse(t,n,r)}else{stream.pushAll(r.minWidth||n.minWidth,t.minWidth);stream.pushAll(r.minHeight||n.minHeight,t.minHeight);stream.pushAll(r.width||t.width,n.width,true);stream.pushAll(r.height||t.height,n.height);stream.pushAll(r.left||stream.once(0),n.left);stream.pushAll(r.top||stream.once(0),n.top);stream.pushAll(stream.combine([t.leftAccum,t.left],add),n.leftAccum);stream.pushAll(stream.combine([t.topAccum,t.top],add),n.topAccum);stream.pushAll(stream.combine([t.scroll,t.top],subtract),n.scroll)}};var layout=function(t,n){var r=n?t:div;var e=n||t;return function(){var t=Array.prototype.slice.call(arguments);return r(function(n){n.$el.css("pointer-events","none");var r=build(n.$el,t);contexts(n,r,e.apply(null,[n].concat(r)))})}};var all=function(t){return function(n){return t.reduce(function(t,n){return n(t)},n)}};var rootComponent=function(t){stream.pushAll(windowWidth,t.width,true);stream.pushAll(stream.combine([t.width,t.minHeight],function(t,n){return n(t)}),t.height);stream.push(t.top,0);stream.push(t.left,0);stream.push(t.topAccum,0);stream.push(t.leftAccum,0);stream.push(windowScroll,t.scroll)};var color=function(t){return $.extend({r:0,g:0,b:0,a:1},t)};var multiplyColor=function(t){return function(n){return{r:Math.min(255,n.r*t),g:Math.min(255,n.g*t),b:Math.min(255,n.b*t),a:n.a}}};var desaturate=function(t){return function(n){var r=(n.r+n.g+n.b)/3;var e=1-t;return{r:e*n.r+t*r,g:e*n.g+t*r,b:e*n.b+t*r,a:n.a}}};var colorBrightness=function(t){return(t.r+t.g+t.b)/(255+255+255)};var colorString=function(t){return"rgba("+Math.floor(t.r)+","+Math.floor(t.g)+","+Math.floor(t.b)+","+t.a+")"};var rgbColorString=function(t){return"rgb("+Math.floor(t.r)+","+Math.floor(t.g)+","+Math.floor(t.b)+")"};var transparent=color({a:0});var black=color({r:0,g:0,b:0});var white=color({r:255,g:255,b:255});var mapMinWidths=function(t){return stream.combine(t.map(function(t){return t.minWidth}),function(){var t=Array.prototype.slice.call(arguments);return t})};var mapMinHeights=function(t){return stream.combine(t.map(function(t){return t.minHeight}),function(){var t=Array.prototype.slice.call(arguments);return t})};var url=function(t){return'url("'+t+'")'};var and=function(t){return function(n){return function(r){var e=n(r);t(e);return e}}};var $$=function(t){return function(n){return function(r){var e=n(r);t(e.$el);return e}}};var jqueryMethod=function(t){return function(){var n=Array.prototype.slice.call(arguments);return $$(function(r){r[t].apply(r,n)})}};var $addClass=jqueryMethod("addClass");var $attr=jqueryMethod("attr");var $css=jqueryMethod("css");var $on=jqueryMethod("on");var $prop=jqueryMethod("prop");var withMinWidth=function(t){return layout(function(n,r){n.$el.addClass("withMinWidth");return{minWidth:stream.once(t)}})};var withMinHeight=function(t){return layout(function(n,r){n.$el.addClass("withMinHeight");return{minHeight:stream.once(constant(t))}})};var passthrough=function(t){return layout(function(n){n.$el.addClass("passthrough");t(n.$el)})};var link=$css("cursor","pointer");var componentName=function(t){return passthrough(function(n){n.addClass(t)})};var onThis=function(t){return function(n){return $on(t,n)}};var changeThis=onThis("change");var clickThis=onThis("click");var inputPropertychangeThis=onThis("input propertychange");var keydownThis=onThis("keydown");var keyupThis=onThis("keyup");var mousedownThis=onThis("mousedown");var mousemoveThis=onThis("mousemove");var mouseoverThis=onThis("mouseover");var mouseoutThis=onThis("mouseout");var mouseupThis=onThis("mouseup");var submitThis=onThis("submit");var pushOnClick=function(t,n){return clickThis(function(r){stream.push(t,n(r))})};var hoverThis=function(t){return passthrough(function(n){t(false,n);n.on("mouseover",function(r){t(true,n,r)});n.on("mouseout",function(r){t(false,n,r)})})};var hoverStream=function(t,n){n=n||function(t){return t};return passthrough(function(r){r.css("pointer-events","initial");r.on("mouseover",function(r){stream.push(t,n(r))});r.on("mouseout",function(r){stream.push(t,n(false))})})};var cssStream=function(t,n){return passthrough(function(r){stream.map(n,function(n){r.css(t,n)})})};var withBackgroundColor=function(t,n){if(!stream.isStream(t)){t=stream.once({backgroundColor:t,fontColor:n})}return passthrough(function(n){stream.map(t,function(t){var r=t.backgroundColor;var e=t.fontColor;n.css("color",colorString(e)).css("background-color",colorString(r))})})};var withFontColor=function(t){return passthrough(function(n){n.css("color",colorString(t))})};var hoverColor=function(t,n,r,e){t=colorString(t||transparent);n=colorString(n||t);r=colorString(r||black);e=colorString(e||r);return hoverThis(function(i,a){a.css("background-color",i?n:t);a.css("color",i?e:r)})};var keepAspectRatioCorner=function(t){return layout(function(n,r){n.$el.addClass("keepAspectRatioCorner");var e=stream.combine([r.minWidth,r.minHeight],function(t,n){return t/n(t)});var i=stream.combine([r.minWidth,r.minHeight,n.width,n.height],function(n,r,e,i){var a=n/r(n);var u=e/i;if(!t.fill&&u>a||t.fill&&u<a){var o=i*a;var s;if(t.left){s=0}else if(t.right){s=e-o}else{s=(e-o)/2}return{top:0,left:s,width:o,height:i}}else{var c=e/a;var h;if(t.top){h=0}else if(t.bottom){h=i-c}else{h=(i-c)/2}return{top:h,left:0,width:e,height:c}}});return[{},{top:stream.prop(i,"top"),left:stream.prop(i,"left"),width:stream.prop(i,"width"),height:stream.prop(i,"height")}]})};var keepAspectRatio=keepAspectRatioCorner();var keepAspectRatioFill=keepAspectRatioCorner({fill:true});var linkTo=function(t){return layout(a,function(n){n.$el.prop("href",t)})};var nothing=div(function(t){stream.push(t.minWidth,0);stream.push(t.minHeight,constant(0))});var text=function(t,n){if(!stream.isStream(t)){t=stream.once(t)}return div(function(n,r,e){e();stream.onValue(t,function(t){n.$el.html(t);r()})})};var ignoreSurplusWidth=function(t,n){return n};var ignoreSurplusHeight=function(t,n){return n};var centerSurplusWidth=function(t,n){var r=n[n.length-1];var e=t-(r.left+r.width);var i=e/n.length;n.map(function(t,n){t.left+=e/2});return n};var evenSplitSurplusWidth=function(t,n){var r=n[n.length-1];var e=t-(r.left+r.width);var i=e/n.length;n.map(function(t,n){t.width+=i;t.left+=n*i});return n};var evenSplitSurplusWidthWithMinPerRow=function(t){return function(n,r){var e=r[r.length-1];var i=n-(e.left+e.width);var a=n/Math.max(t,r.length);r.map(function(t,n){t.width=a;t.left=n*a});e=r[r.length-1];i=n-(e.left+e.width);a=i/r.length;r.map(function(t,n){t.left+=i/2});return r}};var justifySurplusWidth=function(t,n){var r=n[n.length-1];var e=t-(r.left+r.width);n.map(function(t,r){for(var i=0;i<r;i++){t.left+=e/(n.length-1)}});return n};var justifyAndCenterSurplusWidth=function(t,n){var r=n[n.length-1];var e=t-(r.left+r.width);n.map(function(t,r){t.left+=r*e/n.length+e/(2*n.length)});return n};var surplusWidthAlign=function(t){return function(n,r){var e=r[r.length-1];var i=n-(e.left+e.width);r.map(function(n,r){n.left+=t*i});return r}};var surplusWidthAlignLeft=surplusWidthAlign(0);var surplusWidthAlignCenter=surplusWidthAlign(.5);var surplusWidthAlignRight=surplusWidthAlign(1);var superSurplusWidth=function(t,n){var r=n[n.length-1];var e=t-(r.left+r.width);if(n.length===1){if(e<n[0].width){return evenSplitSurplusWidth(t,n)}else{return n}}if(n.length===2){return justifyAndCenterSurplusWidth(t,n)}return justifySurplusWidth(t,n)};var giveToNth=function(t){return function(n,r){var e=r[r.length-1];var i=n-(e.left+e.width);r.map(function(n,e){if(e===t||e===r.length-1&&t>=r.length){n.width+=i}else if(e>t){n.left+=i}});return r}};var giveToFirst=giveToNth(0);var giveToSecond=giveToNth(1);var giveToThird=giveToNth(2);var centerSurplusHeight=function(t,n){var r=n[n.length-1];var e=t-(r.top+r.height);n.map(function(t,n){t.top+=e/2});return n};var giveHeightToNth=function(t){return function(n,r){var e=r[r.length-1];var i=n-(e.top+e.height);r.map(function(n,e){if(e===t||e===r.length-1&&t>=r.length){n.height+=i}else if(e>t){n.top+=i}});return r}};var giveHeightToLast=function(t,n){var r=n.length-1;var e=n[n.length-1];var i=t-(e.top+e.height);n.map(function(t,e){if(e===r||e===n.length-1&&r>=n.length){t.height+=i}else if(e>r){t.top+=i}});return n};var sideBySide=function(t){t=t||{};t.padding=t.padding||0;t.handleSurplusWidth=t.handleSurplusWidth||ignoreSurplusWidth;return layout(function(n,r){var e=mapMinWidths(r);var i=mapMinHeights(r);var a=r.map(function(){return{left:stream.create(),width:stream.create()}});stream.all([n.width,e,i],function(n,r,e){var i=0;var u=r.map(function(n,r){var e={left:i+t.padding*r,width:n};i+=n;return e});u=t.handleSurplusWidth(n,u);u.map(function(t,n){var r=a[n];stream.push(r.left,t.left);stream.push(r.width,t.width)})});return[{minWidth:stream.map(e,function(n){return n.reduce(add,t.padding*(r.length-1))}),minHeight:stream.map(i,function(t){return function(n){return t.map(apply(n)).reduce(mathMax,0)}})},a]})};var stack=function(t){t=t||{};t.padding=t.padding||0;t.handleSurplusHeight=t.handleSurplusHeight||ignoreSurplusHeight;t.transition=t.transition||0;var n=t.transition+"s";return layout(function(r,e){var i=mapMinWidths(e);var a=mapMinHeights(e);var u=e.map(function(){return{top:stream.create(),height:stream.create()}});e.map(function(t){t.$el.css("transition","height "+n+", top "+n)});stream.all([r.width,r.height,a],function(n,r,e){var i=0;var a=e.map(function(r,e){var a={top:i+t.padding*e,height:r(n)};i+=r(n);return a});a=t.handleSurplusHeight(r,a);a.map(function(t,n){var r=u[n];stream.push(r.top,t.top);stream.push(r.height,t.height)})});return[{minWidth:stream.map(i,function(t){return t.reduce(mathMax,0)}),minHeight:stream.map(a,function(n){return function(r){return n.map(apply(r)).reduce(add,t.padding*(e.length-1))}})},u]})};var margin=function(t){var n=t.all||0,r=t.all||0,e=t.all||0,i=t.all||0;if($.isNumeric(t)){n=r=e=i=t}else{for(var a in t){var u=a.toLowerCase();if(t[a]!==null){if(u.indexOf("top")!==-1){n=t[a]}if(u.indexOf("bottom")!==-1){r=t[a]}if(u.indexOf("left")!==-1){e=t[a]}if(u.indexOf("right")!==-1){i=t[a]}}}}return layout(function(t,a){t.$el.addClass("margin");return[{minWidth:stream.map(a.minWidth,function(t){return t+e+i}),minHeight:stream.map(a.minHeight,function(t){return function(e){return t(e)+n+r}})},{top:stream.once(n),left:stream.once(e),width:stream.map(t.width,function(t){return t-e-i}),height:stream.map(t.height,function(t){return t-n-r})}]})};var expandoStream=function(t){var n=stream.create();var r=stream.create();var e=stream.create();var i=stream.create();stream.map(t,function(t){var a=t.all||0,u=t.all||0,o=t.all||0,s=t.all||0;if($.isNumeric(t)){a=u=o=s=t}else{for(var c in t){var h=c.toLowerCase();if(t[c]!==null){if(h.indexOf("top")!==-1){a=t[c]}if(h.indexOf("bottom")!==-1){u=t[c]}if(h.indexOf("left")!==-1){o=t[c]}if(h.indexOf("right")!==-1){s=t[c]}}}}stream.push(n,a);stream.push(r,u);stream.push(e,o);stream.push(i,s)});return layout(function(t,a){return{minWidth:stream.combine([a.minWidth,e,i],function(t,n,r){return t+n+r}),minHeight:stream.combine([a.minHeight,n,r],function(t,n,r){return function(e){return t(e)+n+r}}),width:stream.combine([t.width,e,i],function(t,n,r){return t-n-r}),height:stream.combine([t.height,n,r],function(t,n,r){return t-n-r}),top:n,left:e}})};var alignLRM=function(t){t=t||{};t.transition=(t.transition||0)+"s";return function(n){return layout(function(n,r,e,i){n.$el.addClass("alignLRM");r.$el.css("transition","left "+t.transition);e.$el.css("transition","left "+t.transition);i.$el.css("transition","left "+t.transition);return[{minWidth:stream.combine([r.minWidth,e.minWidth,i.minWidth],function(t,n,r){return[t,n,r].reduce(add)}),minHeight:stream.combine([r.minHeight,e.minHeight,i.minHeight],function(t,n,r){return function(e){return[t,n,r].map(apply(e)).reduce(mathMax)}})},{width:r.minWidth},{width:e.minWidth,left:stream.combine([e.minWidth,n.width],function(t,n){return n-t})},{width:i.minWidth,left:stream.combine([i.minWidth,n.width],function(t,n){return(n-t)/2})}]})(n.l||nothing,n.r||nothing,n.m||nothing)}};var center=function(t){return function(n){return alignLRM(t)({m:n})}};var alignTBM=function(t){t=t||{};t.transition=(t.transition||0)+"s";return function(n){return layout(function(n,r,e,i){if(t.ctx){t.ctx(n,r,e,i)}n.$el.addClass("alignTBM");r.$el.css("transition","top "+t.transition);e.$el.css("transition","top "+t.transition);i.$el.css("transition","top "+t.transition);var a=function(t){return stream.combine([n.width,t.minHeight],function(t,n){return n(t)})};return[{minWidth:stream.combine([r.minWidth,e.minWidth,i.minWidth],function(t,n,r){return[t,n,r].reduce(mathMax)}),minHeight:stream.combine([r.minHeight,e.minHeight,i.minHeight],function(t,n,r){return function(e){return[t,n,r].map(apply(e)).reduce(add)}})},{height:a(r)},{height:a(e),top:stream.combine([e.minHeight,n.height,n.width],function(t,n,r){return n-t(r)})},{height:a(i),top:stream.combine([i.minHeight,n.height,n.width],function(t,n,r){return(n-t(r))/2})}]})(n.t||nothing,n.b||nothing,n.m||nothing)}};var border=function(t,n,r){var e=n.left||n.all||0;var i=n.right||n.all||0;var a=n.top||n.all||0;var u=n.bottom||n.all||0;var o=n.radius||0;r=r||"solid";if(!stream.isStream(t)){t=stream.once(t)}var s=stream.map(t,colorString);return layout(function(t,n){t.$el.addClass("border");n.$el.css("border-radius",px(o));stream.map(s,function(t){n.$el.css("border-left",px(e)+" "+r+" "+t).css("border-right",px(i)+" "+r+" "+t).css("border-top",px(a)+" "+r+" "+t).css("border-bottom",px(u)+" "+r+" "+t)});return[{minWidth:stream.map(n.minWidth,function(t){return t+e+i}),minHeight:stream.map(n.minHeight,function(t){return function(n){return t(n)+a+u}})},{top:stream.once(0),left:stream.once(0),width:stream.map(t.width,function(t){return t-e-i}),height:stream.map(t.height,function(t){return t-a-u})}]})};var componentStream=function(t){var n=new Error;return div(function(n){n.$el.addClass("componentStream");var r;var e=stream.reduce(t,function(t,r){if(r){r.destroy()}r=t(n.$el);contexts(n,r);return r});return function(){if(r){r.destroy()}}})};var promiseComponent=function(t){var n=stream.once(nothing);Q(t).then(function(t){stream.push(n,t)},function(t){console.log(t)}).catch(function(t){console.log(t)});return componentStream(n)};var toggleComponent=function(t,n){return componentStream(stream.map(n,function(n){return t[n]}))};var withMinHeightStream=function(t){return layout(function(n,r){n.$el.addClass("withMinHeightStream");return{minHeight:$.isFunction(t)?t(r):t}})};var minHeightAtLeast=function(t){if(!stream.isStream(t)){t=stream.once(t)}return withMinHeightStream(function(n){return stream.combine([n.minHeight,t],function(t,n){return function(r){return Math.max(t(r),n)}})})};var overlays=function(t){return layout(function(t,n){var r=function(t){return stream.combine(t,function(){var t=Array.prototype.slice.call(arguments);return t.reduce(mathMax,0)})};return[{minWidth:stream.combine(n.map(function(t){return t.minWidth}),function(){var t=Array.prototype.slice.call(arguments);return t.reduce(mathMax,0)}),minHeight:stream.combine(n.map(function(t){return t.minHeight}),function(){var t=Array.prototype.slice.call(arguments);return function(n){return t.map(apply(n)).reduce(mathMax,0)}})}]})};var matchStrings=function(t){return function(n){for(var r=0;r<t.length;r++){var e=t[r];if(n.indexOf(e.string)===0){return e.router(n.substring(e.string.length))}}}};var routeToComponent=function(t){return function(){return t}};var routeToComponentF=function(t){return function(){return t()}};var routeToFirst=function(t){return function(n){for(var r=0;r<t.length;r++){var e=t[r](n);if(e){return e}}}};var routeMatchRest=function(t){return function(n){return promiseComponent(Q(n).then(t))}};var route=function(t,n){return componentStream(stream.map(t,function(t){return n(t)}))};